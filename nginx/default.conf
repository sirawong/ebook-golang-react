upstream client {
    server client:3000;

}
upstream user {
    server user:8000;

}
upstream book {
    server book:8001;

}
upstream cart {
    server cart:8002;

}

server {
    listen 80 default_server;

    location / {
        proxy_pass http://client;
    }

    location /user {
        proxy_pass http://user;
        rewrite ^/user/(.*)$ /$1 break;
    }

    location /book {
        proxy_pass http://book;
        rewrite ^/book/(.*)$ /$1 break;
    }

    location /cart {
        proxy_pass http://cart;
        rewrite ^/cart/(.*)$ /$1 break;
    }
}